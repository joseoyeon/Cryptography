# 블록암호란

블록 암호를 사용할 때에도 항상 커코프(kereckhoff)의 원리를 따라야 한다. 

따라서 암호화/복호화 알고리즘은 알려져 있다고 가정한다. 



## 공격

키 공간의 절반을 전수 조사하려면 2^n-1^ 의 작업이 필요하고 

매번 75%의 정확성을 제공한다. (공격자가 키를 찾는다(50%) = 정답을 알수 있다(100%) 
                              공격자가 키를 찾지 못하고(50%) 무작위로 답을 맞춘다.50%
                              .^.^. 공격자가 정답을 맞출 확률 0.5 + 0.5 * 0.5 = 0.75)
  
## 순열 패리티

단일키를 이용한 암호화는 순열 테이블의 룩업과 일치한다.

순열은 두가지 형태가 있다.

짝수를 기반으로 생성하는 순열(짝수 순열)

홀수를 기반으로 생성하는 순열(홀수 순열)

현대 불록 암호는 128비트 블록을 사용하지만 동작은 32비트 단위로 수행한다. 

결과적으로 모든 블록 암호에서는 짝수 순열만 생성

패리티(parity) 공격 : 주어진 키에 대해 가능한 모든 펴문을 암호화해 순열을 추출할 수 있다. 

실용적인 블록암호에서는 홀수 순열을 생성하기 어렵기 때문에 생성된 순열이 홀수라면 이상적인 블록 암호이고 순열이 짝수라면 시룡ㅇ적인 블록 암호다.

이런 구별자는 75%의 성공률을 가진다.

순열의 패리티를 찾으려면 하나만 빼고 암호화 함수의 모든 평문/암호문 쌍을 계산해야 한다.(남은 평문이 남은 암호문에 대응해서 마지막 하나는 쉽게 알수 있다.)

### 블록 암호안전의 정의
```
정의 1 안전한 블록 암호는 어떤 공격도 통하지 않는다.
```
```
정의 2 블록 암호에 대한 공격은 이상적인 블록 암호와 구별하기 위한 비일반적인 방법이다.
```
블록 암호와 이상적인 블록 암호를 구별한다는 것은

암호문 X가 주어졌을 때 동일한 크기의 블록(난수)과 키를 가진 이상적인 블록 암호와 비교한다. 

구별자 알고리즘은 블랙박스 함수가 블록 암호 X인지 이상적인 블록 암호인지를 계산할 수 있는 알고리즘이다.

구별자는 암호화와 복호화가 가능, 암호화/복호화 키를 자유롭게 구현할 수 있다. 

```
정의 3 이상적인 블록 암호는 각 키 값에 대해 짝수 순열을 임의로 선택하게
구현해야 한다.
```

### DES
XOR (+)
정수 덧셈 [+]

![image](https://user-images.githubusercontent.com/46625602/64907072-f32d3280-d728-11e9-9ae6-de6d43e661e5.png)

S-box는 비선형성을 가져다 준다. 

s-box가 없으면 이진 덧셈으로만 구성되기 때문에 선형 대수를 이용한 수학적 공격에 취약하다. 

s-box, 확장함수, 비트 혼합 함수는 확산의 성질을 제공한다 

확산이란 1비트의 입력이 다수의 변형으로 나타난다는 뜻이다.

#### DES의 취약점

각 라운드 키는 암호 키로부터  선택된 몇 가지 비트만으로 만들어진다.

암호키가 0이면 모든 라운드 키는 0으로 동일하다.

이렇게 되면 암호화 키와 복호화 키가 순서만 다르므로 모든 라운드 키가 0이 되는 것이다. 

이것은 탐지 되기 쉬워 공격이 용이하기 때문에 이상적인 블록암호라면 이런 속성을 가져서는 안된다.

또한 모든 키 K와 평문에 대해 다음과 같은 보수 특성을 가진다. 

![image](https://user-images.githubusercontent.com/46625602/64907192-2fad5e00-d72a-11e9-8826-5741714f238d.png)

다시 말해 평문의 보수 값을 키에 보수로 취한 값으로 암호화 하면 기존 암호화된 값의 보수를 얻을 수 있다.

### AES

![image](https://user-images.githubusercontent.com/46625602/64907231-95014f00-d72a-11e9-8edd-935aff49bdec.png)

#### 공격 방법

1. 192비트 키를 사용하는 12라운 드 AES에 대한 4개의 연관키를 사용해 공격하는 것 = 2^176^ DUSTKS

2. 256비트 키를 사용하는 14라운드 AES에 대해 4개의 연관키를 사용해 2^119^의 연산으로 공격하는 것이다. 

3. 256비트 키를 사용하는 14라운드 AES 에 대해 10라운드를 2개의 연관키를 사용해 단지 2^45^의 연산으로 공격하는 것이다

### Serpnt

AES 최종 후보중 하나였다. 보안에 중점을 두고 설계했다. 그래서 AES 속도의 1/3이다.

게다가 S-box가 cpu에 적합한 부울식으로 변환해야 하기 때문에 효과적으로 구현하기 어렵다.

알려진 최고의 공격은 32라운드중 12라운드에서만 적용 가능하다.

비트슬라이스 구현 : 32라운드의 각 라운드는 32개의 s-box가 요구되기 때문에 구현하면 느려진다. 따라서 s-box를 부울식으로 작성한다.

다른 입력 데이터라고 할지라도 레지스터의 각 비트 위치는 동일한 함수로 계산할 수 있기 때문에 32비트 CPU에서 병렬적으로 32개의 S-box를 계산할 수 있다. 



